#!/bin/bash
# TIMEPOINT Flash CLI Wrapper
# Reliable entry point that survives uv sync and works on all Python versions

set -e

# Get the directory where this script lives
SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"

# Activate virtual environment if it exists and isn't already active
if [ -z "$VIRTUAL_ENV" ] && [ -d "$SCRIPT_DIR/.venv" ]; then
    source "$SCRIPT_DIR/.venv/bin/activate"
fi

# Add project root to PYTHONPATH to ensure app module is importable
export PYTHONPATH="$SCRIPT_DIR:$PYTHONPATH"

# Run the CLI using Python module syntax (most reliable approach)
exec python3 -m app.cli "$@"
